{% extends 'bootstrap/base.html' %}
{% block title %}YouDoIt{% endblock %}
{% block content %}
<div>
    <table class="table table-dark table-bordered">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th style="width:70%" scope="col" align="center">Loop Video</th>
            <th scope="col" align="center">Download Audio</th>
            <th scope="col" align="center">Download Video</th>
        </tr>
        </thead>
        <tbody>
        {% for result in results %}
        <!-- 16:9 aspect ratio -->
        <tr>
            <th scope="row">{{ result[0] }}</th>
            <td style="width:70%">
                <div class="embed-responsive embed-responsive-16by9">
                    <iframe id="yplayer{{ result[0] }}" class="embed-responsive-item"
                            frameborder="0"
                            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen></iframe>
                    <!--
                    <iframe width="853" height="480" src="https://www.youtube.com/embed/{{ result[1] }}"
                            src="//www.youtube.com/v/lG5aSZBAuPs&autoplay=1&loop=1&playlist=lG5aSZBAuPs" frameborder="0"
                            allowfullscreen></iframe>
                    -->
                </div>
            </td>
            <td align="center"></td>
            <td align="center">Download link</td>
        </tr>
        {% endfor %}
        </tbody>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
  // Load the IFrame Player API code asynchronously.
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/player_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;
  function onYouTubePlayerAPIReady() {
    {% for result in results %}
    player = new YT.Player('yplayer{{ result[0] }}', {
      height: '390',
      width: '640',
      videoId: '{{ result[1] }}',
      playerVars: {
        playlist: '{{ result[1] }}',
        loop: 1
      }
    };
    {% endfor %}
  }
</script>
{% endblock %}

